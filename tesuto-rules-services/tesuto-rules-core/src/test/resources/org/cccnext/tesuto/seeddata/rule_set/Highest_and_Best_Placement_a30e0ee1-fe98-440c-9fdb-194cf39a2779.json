{"id":"a30e0ee1-fe98-440c-9fdb-194cf39a2779","family":"SYS","engine":"tesuto","version":null,"title": "Statewide Assigned Placement Logic - Oct 2017","status":"draft","event":"ASSIGNED_PLACEMENT","category":"mmAssignedPlacementLogic","competencyMapDiscipline":"MATH","description":"When evaluating multiple Placements that exist for a student, the Assigned Placement decision logic selects the Placement that is the highest course into which a student can enroll.","ruleSetRowIds":[],"ruleSetDrl":"package org.cccnext.tesuto.rules;\n\nimport java.util.Date\nimport java.util.Map\nimport java.lang.String\nimport java.util.List\nimport java.util.ArrayList\nimport org.cccnext.tesuto.placement.view.PlacementViewDto\nimport org.cccnext.tesuto.placement.view.AssignedPlacementRulesSourceDto\n\nimport org.ccctc.common.droolscommon.RulesAction\nimport function org.cccnext.tesuto.rules.function.DrlFunctions.getHighestAndBestPlacementFromList\nimport function org.cccnext.tesuto.rules.function.DrlFunctions.PLACEMENTS_KEY\n\n// Assigned Placement\nrule \"ruleset_id::${rule_set_id}::rule_id::da181d3c-e1f5-494f-bd9c-165adc71d3bd\" when\n    map : Map()\n    ruleSetId : String(this == \"${rule_set_id}\") from map.get(\"RULE_SET_ID\")\n    placementsView : AssignedPlacementRulesSourceDto(placements : placements) from map.get(PLACEMENTS_KEY())\n    eval(placements.size() > 0)\n    bestPlacement : PlacementViewDto() from getHighestAndBestPlacementFromList(placementsView.placements)\n    then\n        List<RulesAction> actions = (List<RulesAction>) map.get(\"actions\");\n        bestPlacement.setAssigned(true);\n        bestPlacement.setAssignedDate(new Date());\n        bestPlacement.setAssignedRuleSetId(ruleSetId);\n        RulesAction action = new RulesAction(\"ASSIGNED_PLACEMENT_ACTION\");\n        action.addActionParameter(\"assignedPlacement\", bestPlacement);\n        actions.add(action);\nend","ruleSetDrlValidationCsv":"fact,fact,fact,fact,fact,fact,fact,fact,fact,fact,fact,result,result,result\nruleSetId,placement,placement,placement,placement,placement,placement,placement,placement,placement,placement,id,cb21Code,cb21Level,createdOn,isAssigned,assignedRuleSetId\n${rule_set_id},1:E:5:2017-05-01,,,,,,,,,,1,E,5,2017-05-01,true,${rule_set_id}\n${rule_set_id},1:E:5:2017-05-01,2:D:4:2017-03-01,3:C:3:2017-02-01,4:C:3:2017-06-01,5:E:5:2017-01-01,,,,,,4,C,3,2017-06-01,true,${rule_set_id}\n${rule_set_id},1:E:5:2017-05-01,2:D:4:2017-03-01,3:C:3:2017-02-01,4:C:3:2017-06-01,5:E:5:2017-01-01,6:B:2:2017-08-01,7:Y:0:2017-07-07,8:A:1:2017-03-03,9:C:3:2017-08-08,10:Y:0:2017-02-21,7,Y,0,2017-07-07,true,${rule_set_id}\n${rule_set_id},,,,,,,,,,,"}
